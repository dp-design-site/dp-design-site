<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–æ–±–∞–≤—è–Ω–µ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: auto; padding: 20px; }
        input, textarea { width: 100%; padding: 8px; margin: 8px 0; }
        button { background: #28a745; color: white; padding: 10px; border: none; cursor: pointer; }
        button:hover { background: #218838; }
    </style>
</head>
<body>

    <h2>–î–æ–±–∞–≤—è–Ω–µ –Ω–∞ –Ω–æ–≤ –ø—Ä–æ–¥—É–∫—Ç</h2>

    <form id="productForm">
        <label>–ò–º–µ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∞:</label>
        <input type="text" id="productName" required>

        <label>–û–ø–∏—Å–∞–Ω–∏–µ:</label>
        <textarea id="productDescription" required></textarea>

        <label>–¶–µ–Ω–∞:</label>
        <input type="number" id="productPrice" required>

        <label>–°—Ç–∞—Ä–∞ —Ü–µ–Ω–∞ (–∞–∫–æ –∏–º–∞ –Ω–∞–º–∞–ª–µ–Ω–∏–µ):</label>
        <input type="number" id="productOldPrice">

        <label>–°–Ω–∏–º–∫–∞ (URL –ª–∏–Ω–∫):</label>
        <input type="text" id="productImage" required>

        <button type="submit">–î–æ–±–∞–≤–∏ –ø—Ä–æ–¥—É–∫—Ç</button>
    </form>

    <p id="statusMessage"></p>

    <script>
        document.getElementById("productForm").addEventListener("submit", function(event) {
            event.preventDefault();

            let productData = {
                id: Date.now(),
                name: document.getElementById("productName").value.trim(),
                description: document.getElementById("productDescription").value.trim(),
                price: document.getElementById("productPrice").value.trim(),
                oldPrice: document.getElementById("productOldPrice").value.trim() || "",
                image: document.getElementById("productImage").value.trim()
            };

            console.log("üì§ –ò–∑–ø—Ä–∞—â–∞–º–µ –¥–∞–Ω–Ω–∏:", productData);
    fetch("https://script.google.com/macros/s/AKfycbz2ylOZFwfcSTxeCYJDtXKNp_Rgq4EHGfxp5jhwIlpH_LhaJRldpvQ_h0lIugHOx-dU/exec", {
                method: "POST",
                body: JSON.stringify(productData),
                headers: { "Content-Type": "application/json" }
            })
            .then(response => response.text()) 
            .then(data => {
                console.log("‚úÖ –û—Ç–≥–æ–≤–æ—Ä –æ—Ç API:", data);

                let responseData;
                try {
                    responseData = JSON.parse(data);
                } catch (e) {
                    throw new Error("‚ùå –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –ø–∞—Ä—Å–≤–∞–Ω–µ –Ω–∞ JSON –æ—Ç–≥–æ–≤–æ—Ä–∞: " + data);
                }

                if (responseData.status === "success") {
                    document.getElementById("statusMessage").textContent = "‚úÖ –ü—Ä–æ–¥—É–∫—Ç—ä—Ç –µ –¥–æ–±–∞–≤–µ–Ω —É—Å–ø–µ—à–Ω–æ!";
                    document.getElementById("productForm").reset();
                } else {
                    throw new Error("‚ùå –ì—Ä–µ—à–∫–∞ –æ—Ç API: " + responseData.message);
                }
            })
            .catch(error => {
                document.getElementById("statusMessage").textContent = "‚ùå –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤—è–Ω–µ!";
                console.error("‚ùå –ì—Ä–µ—à–∫–∞:", error);
            });
        });
    </script>

</body>
</html>
